<template>

    <div class="map__wrapper">
    
        <!-- <svg id="BACKGROUND_2" data-name="BACKGROUND 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 328.7">
            <path class="cls-1" d="M726.36,298.78c-4,0-19.94-4.57-23.52-4s-32.48,3.07-33.69,3.77-24.36,10.15-28.35,11.32-17.07-2.63-19.06-1.48-15.68.59-20.35,2.13-10.65,4.15-20.18,2.56-19.62-6.55-22.09-3.41-9.51,10.54-18.21,11.77-44.82-2.6-55.34-2.48-48.25,4.21-56.41,4.87-13.51-4.5-15.27-5.47-21.5,2.78-24,2.81-7.15-8.95-10.15-9.76-32.55-8.09-39.09-6.61-42.81,6.84-46.09,5-12.09-5.22-15.59-5.18-23.61-.58-27.85-1.38-58-9.78-59.49-11.74-26.12-5.34-34.12-4.13-19,.5-31.58-1.05-26.54-4.78-37.86-5.78-34.89-2.42-40.39-.95-14.84,1.3-22.46-.59c-7.27-1.8-21.31-6.34-25.21-6.24v88.06H750V299C743.13,298.9,729.34,298.74,726.36,298.78Z"/>
            <path class="cls-1" d="M38.52,50.16c3.09-.95,28-4.56,29-5.72S88.65,27.75,92.1,25.85s14.67,4.76,16.4,2.86S122,28,126,25.5s9.21-6.81,17.41-3.95,16.83,11.45,19,6.2,8.29-17.64,15.8-19.55,38.58,5.25,47.64,5.25,41.59-6.2,48.63-7.15,11.58,7.87,13.09,9.53,18.55-4.29,20.7-4.29,6.08,15.27,8.65,16.69,28,14.3,33.61,11.92,36.93-10.73,39.74-7.63,10.36,9.06,13.38,9.06,20.32,1.43,24,2.86,49.82,17.64,51.12,21,22.44,9.54,29.34,7.63,16.4-.48,27.19,2.38S558.11,84,567.85,85.92s30,4.77,34.77,2.39,12.8-1.91,19.35,1.43c2,1,4.7,2.59,7.48,4.2,6-2.69,10.71-5,11.38-5.81,2-2.61,7.09-5.22,13.67-5.22s6.42,5.24,12.15,12.63,21.62,1.86,23.7-.82,7.65-3.43,11.24-5.32,16.83-1.67,19.34-4.91,11.15-16.26,14.69-17.57c2.32-.85,9.61-.59,14.38-.31V-25.5H0V42.31c6.27.28,16,.7,18.3.7C21.76,43,35.43,51.12,38.52,50.16Z"/>
            <path class="cls-2" d="M25.21,279.07c7.62,1.89,17,2.06,22.46.59s29.07-.05,40.39.95,25.32,4.23,37.86,5.78,23.58,2.27,31.58,1.05,32.59,2.17,34.12,4.13,55.24,10.94,59.49,11.74,24.34,1.42,27.85,1.38,12.31,3.38,15.59,5.18,39.55-3.55,46.09-5,36.1,5.8,39.09,6.61,7.65,9.79,10.15,9.76,22.25-3.77,24-2.81,7.1,6.13,15.27,5.47S475,319.11,485.57,319s46.64,3.7,55.34,2.48,15.74-8.64,18.21-11.77,12.55,1.83,22.09,3.41,15.52-1,20.18-2.56,18.36-1,20.35-2.13,15.06,2.65,19.06,1.48,27.15-10.63,28.35-11.32,30.11-3.16,33.69-3.77,19.51,4,23.52,4c3,0,16.77.12,23.64.2V66.61c-4.77-.28-12.06-.54-14.38.31-3.54,1.31-12.17,14.33-14.69,17.57s-15.74,3-19.34,4.91-9.17,2.65-11.24,5.32-18,8.2-23.7.82-5.57-12.63-12.15-12.63-11.65,2.61-13.67,5.22c-.67.85-5.33,3.12-11.38,5.81-2.78-1.61-5.44-3.16-7.48-4.2-6.55-3.34-14.6-3.82-19.35-1.43s-25-.48-34.77-2.39S546.09,78.3,535.3,75.43,515,71.14,508.11,73.05s-28.05-4.29-29.34-7.63-47.47-19.55-51.12-21-20.95-2.86-24-2.86-10.58-6-13.38-9.06-34.09,5.25-39.74,7.63-31-10.49-33.61-11.92-6.49-16.69-8.65-16.69-19.2,6-20.7,4.29S281.55,5.34,274.51,6.3s-39.57,7.15-48.63,7.15S185.74,6.3,178.24,8.2s-13.64,14.31-15.8,19.55-10.79-3.34-19-6.2S130.07,23,126,25.5s-15.82,1.3-17.54,3.21-13-4.77-16.4-2.86S68.61,43.29,67.57,44.44s-26,4.77-29,5.72S21.76,43,18.3,43c-2.29,0-12-.42-18.3-.7V272.83C3.9,272.73,17.94,277.27,25.21,279.07Z">
                <div id="mapbox-map"></div>
            </path>
        </svg> -->

        <!-- <div class="map-overlay__top"></div> -->

        <div id="mapbox-map"></div>

        <!-- <div class="map-overlay__bottom"></div> -->

    </div>

</template>
<script>
    

    export default {
        props: [
            'location',
        ],
        data() {
            return {
                test: null,
            }
        },
        mounted() {
            var mapboxgl = require('mapbox-gl/dist/mapbox-gl.js');
 
            mapboxgl.accessToken = 'pk.eyJ1IjoiNHd2b2phY2VrIiwiYSI6ImNrbzl5enNkczAxdm8ycHBnMTNpbnVlbHMifQ.-TLmhn9D5wJCXPWWgMucVA';
            var map = new mapboxgl.Map({
                container: 'mapbox-map',
                style: 'mapbox://styles/4wvojacek/cko9zhuus25t817mv9h3ka4rv',
                center: [14.394286, 50.001509],
                zoom: 15,
            });

            map.scrollZoom.disable();

            map.on('load', function () {
                map.loadImage('/images/web/map-marker.png', function(error, image) {
                    if (error) throw error;
                    map.addImage('custom-marker', image);
                    
                    map.addSource('points', {
                        'type': 'geojson',
                        'data': {
                            'type': 'FeatureCollection',
                            'features': [
                                {
                                    'type': 'Feature',
                                    'geometry': {
                                        'type': 'Point',
                                        'coordinates': [14.394286, 50.001509]
                                    },
                                },
                            ]
                        }
                    });
                
                    map.addLayer({
                        'id': 'points',
                        'type': 'symbol',
                        'source': 'points',
                        'layout': {
                            'icon-image': 'custom-marker',
                            'text-field': ['get', 'title'],
                            'text-font': [
                                'Open Sans Semibold',
                                'Arial Unicode MS Bold'
                            ],
                            'text-offset': [0, 1.25],
                            'text-anchor': 'top'
                        }
                    });
                });

                map.resize();
            });

            var popup = new mapboxgl.Popup({
                anchor: 'left',
                closeButton: false,
                closeOnClick: false,
                className: 'map-popup',
                maxWidth: '400px',
                offset: {
                    'left': [80, 10]
                }
            }).setLngLat([14.393256, 50.01110])
                .setHTML('<h4>Za Ploty, 159 00 Lahovice, ÄŒesko</h4>')
                .addTo(map);
        },
        created() {
            //
        },
        computed: {
            //
        },
        methods: {
            update() {
                //
            },
        }
    }
</script>
<style>
    #mapbox-map {
        mask-image: url('/images/bg-map.svg');
    }

    .map-popup {
        background: #fff;
    }

    .map-popup h4 {
        font-size: 20px;
        font-weight: 600;
        color: #3a358a;
        padding: 12px 30px;
    }

    @media (max-width: 1524px) {
        #mapbox-map {
            mask-size: cover;
        }
    }
</style>